# План удаления алгоритма поиска веб-сайтов из основного проекта

## Цель
Удалить алгоритм поиска веб-сайтов (одноколоночный workflow) из основного проекта, оставив только алгоритм генерации описаний компаний (двухколоночный workflow).

## Анализ текущей структуры

### Ключевые компоненты для удаления:
- [ ] **Frontend** - убрать упоминания об одноколоночном формате
- [ ] **Backend обработка файлов** - изменить `load_and_prepare_company_names` для работы только с двумя колонками
- [ ] **Pipeline Core** - удалить логику поиска homepage через HomepageFinder
- [ ] **Finder модули** - удалить homepage_finder и связанные компоненты
- [ ] **Конфигурация** - убрать настройки для поиска веб-сайтов

## Детальный план удаления

### 1. Анализ зависимостей
- [x] Найти все места использования `HomepageFinder`
- [x] Найти все места где проверяется количество колонок
- [x] Найти все места где обрабатывается одноколоночный формат
- [x] Проверить зависимости между модулями

### 2. Обновление Frontend
- [x] Обновить `frontend/index.html` - убрать упоминания одной колонки
- [x] Обновить `frontend/app.js` - убрать обработку одноколоночных файлов
- [x] Обновить инструкции пользователю в UI

### 3. Обновление обработки данных
- [x] Изменить `src/data_io.py:load_and_prepare_company_names()`
- [x] Убрать ветку обработки одной колонки
- [x] Добавить валидацию обязательности второй колонки
- [x] Обновить сообщения об ошибках

### 4. Обновление Pipeline Core
- [x] Изменить `src/pipeline/core.py:_process_single_company_async()`
- [x] Убрать использование `HomepageFinder`
- [x] Убрать флаг `run_standard_homepage_finders`
- [x] Упростить логику - всегда использовать URL из второй колонки

### 5. Удаление Finder модулей
- [x] Удалить `finders/homepage_finder/` полностью
- [x] Удалить импорты `HomepageFinder` из всех файлов
- [x] Обновить `finders/__init__.py`
- [x] Убрать связанные finder'ы если они не используются

### 6. Обновление Pipeline Adapter
- [x] Изменить `src/pipeline/adapter.py:run_pipeline_for_file()`
- [x] Убрать параметр `run_standard_pipeline`
- [x] Упростить создание finder_instances
- [x] Убрать логику выбора алгоритма

### 7. Обновление Backend API
- [x] Изменить `backend/main.py:create_new_session()`
- [x] Убрать параметр `run_standard_pipeline`
- [x] Добавить валидацию файлов на обязательность двух колонок
- [x] Обновить сообщения об ошибках

### 8. Обновление конфигурации
- [x] Обновить `llm_config.yaml` если нужно
- [x] Убрать настройки связанные с поиском веб-сайтов
- [x] Обновить документацию в config файлах

### 9. Очистка зависимостей
- [x] Обновить `requirements.txt` - убрать неиспользуемые зависимости
- [x] Проверить и удалить неиспользуемые импорты
- [x] Очистить код от мертвых веток

### 10. Тестирование и документация
- [x] Протестировать загрузку файлов только с двумя колонками
- [x] Убедиться что одноколоночные файлы отклоняются
- [x] Обновить README и документацию
- [x] Проверить что все работает корректно

## Критически важные файлы для изменения

### Обязательные изменения:
- [ ] `frontend/index.html` - UI инструкции
- [ ] `frontend/app.js` - логика обработки файлов
- [ ] `src/data_io.py` - функция `load_and_prepare_company_names`
- [ ] `src/pipeline/core.py` - основная логика pipeline
- [ ] `src/pipeline/adapter.py` - адаптер pipeline
- [ ] `backend/main.py` - API создания сессий

### Модули для удаления:
- [ ] `finders/homepage_finder/` - весь модуль
- [ ] Импорты `HomepageFinder` из всех файлов
- [ ] Связанные Google Search функции (если не используются в другом месте)

## Ожидаемый результат

После выполнения плана:
- Приложение принимает только файлы с двумя колонками: "Company Name" и "Website"
- Отклоняет файлы с одной колонкой с понятной ошибкой
- Всегда запускает только алгоритм генерации описаний компаний
- Не ищет веб-сайты через Google Search API
- Чистый код без мертвых веток и неиспользуемых модулей

## Риски и предосторожности
- [ ] Сохранить резервную копию проекта перед изменениями
- [ ] Проверить все зависимости между модулями
- [ ] Убедиться что не сломаны существующие процессы
- [ ] Протестировать на реальных данных
- [ ] Проверить что HubSpot интеграция остается рабочей 