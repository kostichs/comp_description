# Company Information Processor

Веб-приложение для обработки информации о компаниях с использованием LLM и веб-скрапинга.

## Требования

- Python 3.8+
- pip (менеджер пакетов Python)

## Установка

1. Клонируйте репозиторий:
```bash
git clone <repository-url>
cd company-description
```

2. Создайте виртуальное окружение и активируйте его:
```bash
python -m venv venv
source venv/bin/activate  # для Linux/Mac
venv\Scripts\activate     # для Windows
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

4. Создайте файл `.env` в корневой директории проекта и добавьте необходимые переменные окружения:
```
OPENAI_API_KEY=your_openai_api_key
SCRAPINGBEE_API_KEY=your_scrapingbee_api_key
SERPER_API_KEY=your_serper_api_key
```

## Запуск

1. Запустите сервер:
```bash
uvicorn backend.main:app --reload
```

2. Откройте веб-браузер и перейдите по адресу:
```
http://localhost:8000
```

## Использование

1. Загрузите входной файл (CSV или Excel) с названиями компаний
2. Нажмите "Run" для запуска обработки
3. На экране появится прогресс-бар с количеством обработанных компаний
4. Результаты появляются в таблице по мере обработки (динамически, без ожидания завершения всего процесса)
5. После завершения обработки появится сообщение "Completed" и итоговое количество обработанных компаний
6. Можно скачать результаты или просмотреть логи
7. Для новой обработки используйте кнопку "Start new session"

## Особенности пайплайна и проверки

- Для поиска homepage компании сначала проверяется прямое совпадение домена (например, www.companyname.com и региональные варианты)
- Если прямой домен не найден, производится попытка угадать домен по TLD с проверкой DNS и HTTP
- Если и это не дало результата, используется LLM для выбора наиболее подходящего URL из поисковой выдачи
- Валидация домена теперь гибкая: сравниваются базовые домены без схемы и слэшей
- Все результаты сохраняются в файл по мере обработки (инкрементально)
- Интерфейс отображает прогресс и новые строки таблицы сразу, как только они появляются

## Структура проекта

```
company-description/
├── frontend/
│   ├── index.html
│   └── app.js
├── src/
│   ├── pipeline.py
│   ├── data_io.py
│   └── external_apis/
│       ├── serper_client.py
│       └── ...
├── input/
├── output/
│   └── sessions/
├── backend/
│   ├── main.py
│   └── processing_runner.py
├── requirements.txt
└── README.md
```

## Лицензия

MIT
